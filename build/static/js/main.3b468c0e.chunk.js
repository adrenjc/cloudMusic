(this.webpackJsonpcloudmusic=this.webpackJsonpcloudmusic||[]).push([[0],{182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},204:function(e,t,n){},287:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){},298:function(e,t,n){},299:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){},310:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(31),r=n.n(c),i=n(52),l=n(53),u=n(55),o=n(54),d=n(9),j=n.n(d),b=n(18),m=n(23),h=(n(182),n(183),n(184),n(185),n(124)),p=n.n(h),f=n(172);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(a,s){var c;p.a.defaults.withCredentials=!0,"GET"===n?c=p.a.get(e,{params:t}):"POST"===n&&(c=p.a.post(e,t)),c.then((function(e){a(e)})).catch((function(e){f.b.error("\u8bf7\u6c42\u51fa\u9519\u4e86:"+e.message)}))}))}var O="/api1";function v(e,t){return x(O+"/login/cellphone",{phone:e,password:t},"GET")}function g(e){return x(O+"/login/status",{timestamp:e},"GET")}function y(e){return x(O+"/user/playlist",{uid:e},"GET")}function N(){return x(O+"/personalized",{},"GET")}var k=function(){return x(O+"/recommend/resource",{},"GET")};function S(e){return x(O+"/playlist/detail",{id:e},"GET")}function w(e){return x(O+"/song/detail",{ids:e},"GET")}function I(e){return x(O+"/song/url",{id:e},"GET")}var L,C,T,A=function(){return x(O+"/banner",{},"GET")},D=function(e){return x(O+"/lyric",{id:e},"GET")},E=function(){return x(O+"/logout",{},"GET")},M=n(322),P=n(44),U=n(319),R=n(321),z=n(170),G=n(323),_=n(324),H=n(32),B=n.n(H),Y=(n(204),{user:{}}),F=n(125),V=n.n(F),W="user-key",K=function(e){V.a.set(W,e)},q=function(){return V.a.get(W)},J=function(){V.a.remove(W)},Q=n(1),X=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).formRef=s.a.createRef(),e.state={redirect:!1},e.onSubmit=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,s,c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.phone,s=n.password,t.next=3,v(a,s);case 3:c=t.sent,r=c.data,console.log(r),200===r.code?(f.b.success("\u767b\u9646\u6210\u529f"),Y.user=r,K(r),e.log(r)):502===r.code&&(f.b.error("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"),E());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.log=function(e){B.a.publish("state",!1),B.a.publish("userData",e)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(Q.jsx)("div",{className:"login",children:Object(Q.jsxs)("div",{className:"login-frame",children:[Object(Q.jsx)("div",{className:"return",onClick:this.log,children:"\u2716\ufe0f"}),Object(Q.jsx)("div",{className:"user-name",children:"\u7528\u6237\u767b\u9646"}),Object(Q.jsx)("div",{className:"input",children:Object(Q.jsxs)(U.a,{ref:this.formRef,name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:this.onSubmit,children:[Object(Q.jsx)(U.a.Item,{name:"phone",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d\uff01"}],children:Object(Q.jsx)(R.a,{prefix:Object(Q.jsx)(G.a,{className:"site-form-item-icon"}),placeholder:"\u624b\u673a\u53f7"})}),Object(Q.jsx)(U.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(Q.jsx)(R.a,{prefix:Object(Q.jsx)(_.a,{className:"site-form-item-icon"}),type:"password",placeholder:"\u5bc6\u7801"})}),Object(Q.jsx)(U.a.Item,{}),Object(Q.jsx)(U.a.Item,{children:Object(Q.jsx)(z.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"\u767b\u9646"})})]})})]})})}}]),n}(a.Component),Z=n(325),$=n(35),ee=M.a.SubMenu,te=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={name:"",userId:"",menuList:[],avatarUrl:"",status:!1,log:!1,loginOut:!1},e.init=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getLoginStatus();case 2:return t.next=4,e.getPlayListInfo();case 4:case"end":return t.stop()}}),t)}))),e.getLoginStatus=Object(b.a)(j.a.mark((function t(){var n,a,s,c,r,i,l,u,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(new Date).getTime(),t.next=3,g(n);case 3:a=t.sent,s=a.data,c=(s=void 0===s?{}:s).data,r=(c=void 0===c?{}:c).profile,l=(i=void 0===r?{}:r).nickname,u=i.userId,o=i.avatarUrl,e.setState({name:l,userId:u,avatarUrl:o});case 11:case"end":return t.stop()}}),t)}))),e.getPlayListInfo=Object(b.a)(j.a.mark((function t(){var n,a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.userId,t.next=3,y(n);case 3:a=t.sent,s=a.data.playlist,e.setState({menuList:s});case 6:case"end":return t.stop()}}),t)}))),e.getMenuNodes=function(){return e.state.menuList.map((function(e){return!1===e.subscribed?Object(Q.jsx)(M.a.Item,{style:{backgroundColor:"#202020",margin:"0",fontSize:"12px"},className:"playlist",children:Object(Q.jsx)(P.b,{to:"/App/playlist/".concat(e.id),style:{fontSize:"14px"},children:Object(Q.jsxs)("span",{className:"iconfont",children:["\ue60f ",e.name]})})},e.id):null}))},e.getMenuNodes1=function(){return e.state.menuList.map((function(e){return!0===e.subscribed?Object(Q.jsx)(M.a.Item,{style:{backgroundColor:"#202020",margin:"0",fontSize:"12px"},className:"playlist",children:Object(Q.jsx)(P.b,{to:"/App/playlist/".concat(e.id),className:"asd",style:{fontSize:"14px"},children:Object(Q.jsxs)("span",{className:"iconfont",children:["\ue60f ",e.name]})})},e.id):null}))},e.LoginUser=function(){!1===e.state.log?e.setState({log:!0}):e.setState({log:!1})},e.loginOut=function(){e.state.loginOut?e.setState({loginOut:!1}):e.setState({loginOut:!0})},e.loginOutState=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:n=t.sent,console.log(n),f.b.success("\u767b\u51fa"),J(),B.a.publish("logOut",!1),e.setState({loginOut:!1});case 8:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.setLoginState;Y.user&&(this.init(),t(!0)),L=B.a.subscribe("state",(function(t,n){e.state.log&&e.setState({log:n})})),C=B.a.subscribe("userData",(function(n,a){e.init(),t(!0)})),T=B.a.subscribe("logOut",(function(e,n){t(!1)}))}},{key:"componentWillUnmount",value:function(){B.a.unsubscribe(L),B.a.unsubscribe(C),B.a.unsubscribe(T)}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.avatarUrl,a=e.log,s=e.loginOut,c=this.props.loginstate;return Object(Q.jsxs)("div",{children:[!0===a?Object(Q.jsx)(X,{}):null,c?Object(Q.jsxs)("div",{children:[s?Object(Q.jsxs)("div",{className:"login-out",onClick:this.loginOutState,children:[Object(Q.jsx)(Z.a,{}),Object(Q.jsx)("span",{className:"out-text",children:"\u9000\u51fa\u767b\u9646"})]}):null,Object(Q.jsxs)("div",{className:"side-nav",children:[Object(Q.jsxs)("div",{className:"side-user",onClick:this.loginOut,children:[Object(Q.jsx)("div",{className:"user-avatar",children:Object(Q.jsx)("img",{src:n,alt:"\u5934\u50cf"})}),Object(Q.jsx)("div",{className:"user",children:t})]}),Object(Q.jsx)("div",{className:"side-page",children:Object(Q.jsxs)(M.a,{style:{width:"200px",color:"#a7a7a7",backgroundColor:"#202020",fontSize:"12px"},mode:"inline",theme:"dark",defaultOpenKeys:["sub3","sub4"],children:[Object(Q.jsx)(M.a.Item,{children:Object(Q.jsx)(P.b,{to:"/App/home",style:{fontSize:"12px",marginRight:"12px"},children:"\u9996\u9875"})},"1"),Object(Q.jsx)(M.a.Item,{children:Object(Q.jsx)(P.b,{to:"/App/home",style:{fontSize:"12px"},children:"\u53d1\u73b0\u97f3\u4e50"})},"2"),Object(Q.jsx)(ee,{title:"\u521b\u5efa\u7684\u6b4c\u5355",children:this.getMenuNodes()},"sub3"),Object(Q.jsx)(ee,{title:"\u6536\u85cf\u7684\u6b4c\u5355",children:this.getMenuNodes1()},"sub4")]})})]})]}):Object(Q.jsxs)("div",{className:"side-nav",children:[Object(Q.jsxs)("div",{className:"side-user",onClick:this.LoginUser,children:[Object(Q.jsx)("div",{className:"user-avatar"}),Object(Q.jsx)("div",{className:"user",children:"\u672a\u767b\u9646"})]}),Object(Q.jsx)("div",{className:"side-page",children:Object(Q.jsxs)(M.a,{style:{width:"200px",color:"#a7a7a7",backgroundColor:"#202020",fontSize:"12px"},mode:"inline",theme:"dark",defaultOpenKeys:["sub3","sub4"],children:[Object(Q.jsx)(M.a.Item,{children:Object(Q.jsx)(P.b,{to:"/App/home",style:{fontSize:"12px",marginRight:"12px"},children:"\u9996\u9875"})},"1"),Object(Q.jsx)(M.a.Item,{children:Object(Q.jsx)(P.b,{to:"/App/home",style:{fontSize:"12px"},children:"\u53d1\u73b0\u97f3\u4e50"})},"2")]})})]})]})}}]),n}(a.Component),ne=Object($.b)((function(e){return{loginstate:e.loginState.data}}),{setLoginState:function(e){return{type:"setLoginState",data:e}}})(te),ae=n(320),se=(n(287),n(314)),ce=n(318),re=n(315),ie=n(316),le=n(317),ue=n(69),oe=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={arr:[],banners:[],isLoding:!1},e.init=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getRecommendPlayList();case 2:return t.next=4,e.getBanner();case 4:e.setState({isLoding:!1});case 5:case"end":return t.stop()}}),t)}))),e.getRecommendPlayList=Object(b.a)(j.a.mark((function t(){var n,a,s,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({isLoding:!0});case 2:if(!e.props.loginstate){t.next=11;break}return t.next=6,k();case 6:n=t.sent,a=n.data.recommend.slice(0,10),e.setState({arr:a}),t.next=16;break;case 11:return t.next=13,N();case 13:s=t.sent,c=s.data.result.slice(0,10),e.setState({arr:c});case 16:case"end":return t.stop()}}),t)}))),e.getBanner=Object(b.a)(j.a.mark((function t(){var n,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:n=t.sent,a=n.data.banners.slice(0,6),e.setState({banners:a});case 5:case"end":return t.stop()}}),t)}))),e.admin=function(){return e.state.arr.map((function(e){return Object(Q.jsx)(se.a,{className:"gutter-row",span:4,style:{padding:"0",margin:"4px 18px 40px 18px"},children:Object(Q.jsxs)(P.b,{to:"/App/playlist/".concat(e.id),className:"content-image",children:[Object(Q.jsx)(ce.a,{src:e.picUrl,preview:!1}),Object(Q.jsx)("div",{children:e.name})]})},e.id)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){this.setState=function(){return!1}}},{key:"render",value:function(){var e=Object(Q.jsx)(ue.a,{style:{fontSize:200},spin:!0}),t=this.state,n=t.isLoding,a=t.banners;return Object(Q.jsx)("div",{className:"admin",children:n?Object(Q.jsx)("div",{className:"home-loding",children:Object(Q.jsx)("div",{children:Object(Q.jsx)(re.a,{indicator:e})})}):Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"carousel",children:Object(Q.jsx)(ae.a,{effect:"fade",autoplay:!0,children:a.map((function(e){return Object(Q.jsx)("div",{className:"home-img",children:Object(Q.jsx)("img",{src:e.imageUrl,alt:""})},e.imageUrl)}))})}),Object(Q.jsxs)("div",{className:"content-area",children:[Object(Q.jsx)(ie.a,{orientation:"left",className:"content-title",style:{color:"#a7a7a7"},children:"\u63a8\u8350\u7684\u6b4c\u5355"}),Object(Q.jsx)(le.a,{gutter:[16,24],className:"ant-row2",children:this.admin()})]})]})})}}]),n}(a.Component),de=Object($.b)((function(e){return{loginstate:e.loginState.data}}))(oe),je=(n(294),n(295),n(326)),be=Object($.b)((function(e){return{sideList:e.sideList,playList:e.playList}}),{})((function(e){var t=Object(a.useState)(!0),n=Object(m.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(null),i=Object(m.a)(r,2),l=i[0],u=i[1];Object(a.useEffect)((function(){var e=B.a.subscribe("audioIndex",function(){var t=Object(b.a)(j.a.mark((function t(n,a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(a);case 2:return t.abrupt("return",(function(){B.a.unsubscribe(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}),[]);var o=function(e){switch(e){case"true":c(!0);break;case"false":c(!1)}};return Object(Q.jsx)("div",{children:e.sideList.data?Object(Q.jsxs)("div",{className:"sidelist",children:[Object(Q.jsxs)("div",{className:"sidelist-title",children:[Object(Q.jsx)("div",{className:s?"sidelist-list true":"sidelist-list",onClick:function(){o("true")},children:"\u64ad\u653e\u5217\u8868"}),Object(Q.jsx)("div",{className:s?"sidelist-history":"sidelist-history true",onClick:function(){o("false")},children:"\u5386\u53f2\u64ad\u653e"})]}),Object(Q.jsxs)("div",{className:"sidelist-subtitle",children:[Object(Q.jsxs)("div",{className:"subtitle",children:["\u603b\u5171",null===e.playList.data?"0":e.playList.data.length,"\u9996"]}),Object(Q.jsxs)("div",{className:"delete",children:[Object(Q.jsx)(je.a,{}),"\xa0 \u5220\u9664"]})]}),Object(Q.jsx)("div",{className:"title-flex"}),null==e.playList.data?"":Object(Q.jsx)("div",{className:"sidelist-song",children:Object(Q.jsx)("table",{children:Object(Q.jsx)("tbody",{children:e.playList.data.map((function(e){return Object(Q.jsxs)("tr",{children:[Object(Q.jsx)("td",{className:"sidelist-songname ".concat(e.key===l?"active-list":null),"\u03bfnf\u03bfcus":"this.blur()",children:e.name}),Object(Q.jsx)("td",{className:"sidelist-singer ".concat(e.key===l?"active-list":null),children:e.singer}),Object(Q.jsx)("td",{className:"sidelist-songtime",children:e.duration})]},e.key)}))})})})]}):null})})),me=n(327),he=n(328),pe=n(329),fe=n(330);var xe,Oe,ve=function(e){return{type:"setAudioUrl",data:e}},ge=n(167),ye=(n(296),n.p+"static/media/png.d4e84f4e.png"),Ne=(n(297),Object($.b)((function(e){return{audioDetails:e.audioDetails}}))((function(e){var t=Object(a.useState)(null),n=Object(m.a)(t,2),s=n[0],c=n[1],r=Object(a.useRef)(),i=Object(a.useState)(null),l=Object(m.a)(i,2),u=l[0],o=l[1],d=Object(a.useRef)(),h=Object(a.useState)(!1),p=Object(m.a)(h,2),f=p[0],v=p[1],g=[],y=[],N=Object(a.useState)(),k=Object(m.a)(N,2),S=k[0],w=k[1],I=Object(a.useState)(),L=Object(m.a)(I,2),C=L[0],T=L[1],A=(new Date).getFullYear();return Object(a.useEffect)((function(){(function(){var t=Object(b.a)(j.a.mark((function t(){var n,a,s,i,l,u,b,m,h,p,f,N,k,S,I,L,C,A;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.audioDetails.data){t.next=18;break}return v(!0),t.next=4,j=e.audioDetails.data[0].id,x(O+"/comment/music",{id:j,offset:void 0},"GET");case 4:return n=t.sent,a=n.data,s=a.comments,i=a.hotComments,t.next=8,c(s);case 8:return t.next=10,o(i);case 10:for(d.current=i,r.current=s,l=0;l<d.current.length;l++)u=new Date(d.current[l].time),b=u.getFullYear(),m=u.getMonth()+1,h=u.getDate(),p=u.getHours(),f=u.getMinutes(),g.push({commentId:d.current[l].commentId,content:d.current[l].content,user:d.current[l].user,Ytime:b,Mtime:m,Dtime:h,Htime:p,Mintime:f,likedCount:d.current[l].likedCount,liked:d.current[l].liked});for(N=0;N<r.current.length;N++)k=new Date(r.current[N].time),S=k.getFullYear(),I=k.getMonth()+1,L=k.getDate(),C=k.getHours(),A=k.getMinutes(),y.push({commentId:r.current[N].commentId,content:r.current[N].content,user:r.current[N].user,Ytime:S,Mtime:I,Dtime:L,Htime:C,Mintime:A,likedCount:r.current[N].likedCount,liked:r.current[N].liked,beReplied:r.current[N].beReplied});w(g),T(y),r.current=s,v(!1);case 18:case"end":return t.stop()}var j}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.audioDetails]),Object(a.useEffect)((function(){(function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a=e.audioDetails.data[0].id,x(O+"/simi/song",{id:a},"GET");case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}var a}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.audioDetails]),Object(Q.jsx)("div",{children:!0===f?Object(Q.jsx)("div",{children:"Loding"}):Object(Q.jsx)("div",{className:"song-comment",children:Object(Q.jsxs)("div",{className:"comment-box",children:[Object(Q.jsxs)("div",{className:"comment-songs",children:[null===u?null:Object(Q.jsx)("div",{className:"featured-box",children:0===u.length?null:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"featured-comment",children:"\u7cbe\u9009\u8bc4\u8bba"}),S.map((function(e,t){return Object(Q.jsxs)("div",{className:"user-comments",children:[Object(Q.jsx)("div",{className:"user-comment-img",children:Object(Q.jsx)("img",{src:e.user.avatarUrl,alt:""})}),Object(Q.jsxs)("div",{className:"user-comment",children:[Object(Q.jsxs)("div",{className:"user-comment-Box",children:[Object(Q.jsxs)("span",{className:"comment-nickname",children:[e.user.nickname,":"]}),Object(Q.jsx)("span",{className:"comment-context",children:e.content})]}),Object(Q.jsxs)("div",{className:"user-comment-time",children:[e.Ytime,"\u5e74",e.Mtime,"\u6708",e.Dtime,"\u65e5"]}),Object(Q.jsx)("div",{className:"user-comment-like",children:e.likedCount})]})]},t)}))]})}),Object(Q.jsx)("div",{className:"new-comment-box",children:null===s?null:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"new-comment",children:"\u6700\u65b0\u8bc4\u8bba"}),null===C?null:C.map((function(e,t){return Object(Q.jsxs)("div",{className:"user-comments",children:[Object(Q.jsx)("div",{className:"user-comment-img",children:Object(Q.jsx)("img",{src:e.user.avatarUrl,alt:""})}),Object(Q.jsxs)("div",{className:"user-comment",children:[Object(Q.jsxs)("div",{className:"user-comment-Box",children:[Object(Q.jsxs)("span",{className:"comment-nickname",children:[e.user.nickname,":"]}),Object(Q.jsx)("span",{className:"comment-context",children:e.content}),0===e.beReplied.length?null:Object(Q.jsxs)("div",{className:"user-replay",children:[Object(Q.jsxs)("span",{className:"replay-name",children:["@",e.beReplied[0].user.nickname,":"]}),Object(Q.jsx)("span",{className:"replay-content",children:e.beReplied[0].content})]})]}),Object(Q.jsx)("div",{className:"user-comment-time",children:A===e.Ytime?Object(Q.jsxs)("span",{children:[e.Mtime,"\u6708",e.Dtime,"\u65e5"]}):Object(Q.jsxs)("span",{children:[e.Ytime,"\u5e74",e.Mtime,"\u6708",e.Dtime,"\u65e5"]})}),Object(Q.jsx)("div",{className:"user-comment-like",children:e.likedCount})]})]},t)}))]})})]}),Object(Q.jsx)("div",{className:"similar-songs"})]})})})}))),ke=Object($.b)((function(e){return{audioDetails:e.audioDetails}}))((function(e){var t=Object(a.useState)(null),n=Object(m.a)(t,2),s=(n[0],n[1]),c=Object(a.useState)(null),r=Object(m.a)(c,2),i=r[0],l=r[1],u=Object(a.useState)(0),o=Object(m.a)(u,2),d=o[0],h=o[1],p=Object(a.useState)(!1),f=Object(m.a)(p,2),x=f[0],O=f[1],v=Object(a.useState)(!1),g=Object(m.a)(v,2),y=g[0],N=(g[1],Object(a.useRef)(!1)),k=Object(a.useRef)(),S=Object(a.useRef)(),w=Object(a.useRef)(),I=Object(a.useRef)(),L=e.audioDetails.data,C=document.querySelector("#audio");Object(a.useEffect)((function(){(function(){var t=Object(b.a)(j.a.mark((function t(){var n,a,c,r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===L){t.next=11;break}if(k.current!==e.data[0].id){t.next=5;break}return t.abrupt("return",null);case 5:return k.current=e.data[0].id,s(k.current),t.next=9,D(k.current);case 9:if(!0===(n=t.sent).data.nolyric)O(!0);else{for(a=n.data.lrc.lyric,c=void 0===a?{}:a,S.current=E(c),r=[],i=0;i<S.current.length;i++)r.push(S.current[i].content),l(r);C.addEventListener("timeupdate",T),C.addEventListener("seeked",(function(){for(var e=0;e<S.current.length;e++)S.current[e].state=!1}))}case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.data]);var T=M(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1e3*C.currentTime,a=0;case 2:if(!(a<S.current.length)){e.next=12;break}if(!(S.current[a].time<=n)){e.next=7;break}!1===S.current[a].state&&(h(S.current.indexOf(S.current[a])),!1===y&&(N.current=!0,I.current.scrollIntoView({behavior:"smooth",block:"center"}),N.current=!1),S.current[a].state=!0),e.next=9;break;case 7:if(!0!==S.current[a].state){e.next=9;break}return e.abrupt("continue",9);case 9:a++,e.next=2;break;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),50),A=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/;function E(e){var t,n=e.split("\n"),a=[],s=Object(ge.a)(n);try{for(s.s();!(t=s.n()).done;){var c=t.value;if(c){if(""===c.replace(A,"").trim())continue;var r=c.replace(A,"").trim(),i=A.exec(c),l=3===i[3].length?1*i[3]:10*i[3],u=60*i[1]*1e3+1e3*i[2]+l;a.push({content:r,time:u,state:!1})}}}catch(o){s.e(o)}finally{s.f()}return a.sort((function(e,t){return e.time-t.time})),a}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=Object(a.useRef)({fn:e,timer:null}),c=s.current;return Object(a.useEffect)((function(){c.fn=e}),[e]),Object(a.useCallback)((function(){c.timer||(c.timer=setTimeout((function(){delete c.timer}),t),c.fn.apply(c,arguments))}),n)}var P=M((function(e){console.log(222)}),50);return Object(Q.jsx)("div",{children:Object(Q.jsxs)("div",{className:"lrc",style:e.state?{display:"block"}:{display:"none"},children:[null!==e.data?Object(Q.jsxs)("div",{className:"lrc-box",children:[Object(Q.jsx)("img",{src:ye,alt:"",className:"background",style:e.isPlay?{animation:"rotate 20s linear infinite",animationPlayState:"running"}:{animation:"rotate 20s linear infinite",animationPlayState:"paused"}}),Object(Q.jsx)("div",{className:"box-img",children:Object(Q.jsx)("div",{className:"lrc-box-img",children:Object(Q.jsx)("img",{src:e.data[0].al.picUrl,alt:"",style:e.isPlay?{animation:"rotate 20s linear infinite",animationPlayState:"running"}:{animation:"rotate 20s linear infinite",animationPlayState:"paused"}})})}),Object(Q.jsxs)("div",{className:"lrc-list",children:[Object(Q.jsxs)("div",{className:"lrc-list-box",children:[Object(Q.jsx)("div",{className:"lrc-title",children:e.data[0].name}),Object(Q.jsxs)("div",{className:"lrc-data",children:[Object(Q.jsxs)("div",{className:"lrc-album",children:[Object(Q.jsx)("div",{children:"\u4e13\u8f91:"}),Object(Q.jsx)("span",{children:e.data[0].al.name})]}),Object(Q.jsxs)("div",{className:"lrc-singer",children:[Object(Q.jsx)("div",{children:"\u6b4c\u624b:"}),Object(Q.jsx)("span",{children:e.data[0].ar[0].name})]})]})]}),Object(Q.jsx)("div",{className:"lrc-lrc",children:Object(Q.jsxs)("div",{className:"lrc-lrc-box",ref:w,onScroll:N.current?null:function(e){return P(e)},children:[Object(Q.jsx)("div",{className:"lrc-p",children:null===i?null:i.map((function(e,t){return Object(Q.jsx)("p",{className:t===d?"lrc-active":"",ref:t===d?I:null,children:e},t)}))}),!0===x?Object(Q.jsx)("p",{className:"pure-music",children:"\u7eaf\u97f3\u4e50\uff0c\u8bf7\u60a8\u6b23\u8d4f"}):null]})})]})]}):null,null===e.audioDetails.data?null:Object(Q.jsx)(Ne,{})]})})})),Se=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,c=new Array(s),r=0;r<s;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).init=function(){xe=B.a.subscribe("songID",function(){var t=Object(b.a)(j.a.mark((function t(n,a){var s,c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({details:a,isPlay:!0});case 2:return t.next=4,w(a.key);case 4:s=t.sent,c=s.data.songs,r=void 0===c?{}:c,(0,e.props.setAudioDetails)(r);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),Oe=B.a.subscribe("songAllId",function(){var t=Object(b.a)(j.a.mark((function t(n,a){var s,c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.state.details.key,c=void 0===s?{}:s,r=a.indexOf(c),t.next=4,e.setState({allSongId:a,audioIndex:r},(function(){B.a.publish("audioIndex",e.state.allSongId[e.state.audioIndex])}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},e.state={isPlay:!1,isMuted:!1,volume:100,allTime:0,currentTime:0,progress:0,details:{},allSongId:"",audioIndex:"",iconPlaylist:!1,lrc:!1},e.audioPlayer=Object(a.createRef)(),e.audios=Object(b.a)(j.a.mark((function t(){var n,a,s,c,r,i,l,u,o,d,b,m,h;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.audioPlayer.current,a=e.state,s=a.audioIndex,c=a.allSongId,t.next=4,I(c[s]);case 4:return r=t.sent,i=r.data.data,l=void 0===i?{}:i,t.next=8,w(c[s]);case 8:return u=t.sent,o=u.data.songs,d=void 0===o?{}:o,b=e.props,m=b.setAudioUrl,h=b.setAudioDetails,t.next=13,h(d);case 13:return t.next=15,m(l);case 15:B.a.publish("audioIndex",e.state.allSongId[e.state.audioIndex]),n.play();case 17:case"end":return t.stop()}}),t)}))),e.controlNextAudio=Object(b.a)(j.a.mark((function t(){var n,a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.allSongId,!((s=n.audioIndex)+1<a.length)){t.next=6;break}return t.next=4,e.setState({audioIndex:s+1,isPlay:!0},Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.audios();case 1:case"end":return t.stop()}}),t)}))));case 4:t.next=9;break;case 6:if(!(s+2>a.length)){t.next=9;break}return t.next=9,e.setState({audioIndex:0,isPlay:!0},Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.audios();case 1:case"end":return t.stop()}}),t)}))));case 9:case"end":return t.stop()}}),t)}))),e.setIcon=Object(b.a)(j.a.mark((function t(){var n,a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,a=n.setListFalse,s=n.setListTrue,!1===e.state.iconPlaylist?e.setState({iconPlaylist:!0},(function(){s(!0)})):e.setState({iconPlaylist:!1},(function(){a(!1)}));case 3:case"end":return t.stop()}}),t)}))),e.previous=Object(b.a)(j.a.mark((function t(){var n,a,s,c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.audio,a=e.state,s=a.audioIndex,c=a.allSongId,null!==n.data){t.next=6;break}f.b.warning("\u6b4c\u5355\u961f\u5217\u91cc\u8fd8\u6ca1\u6709\u6b4c\u66f2"),t.next=15;break;case 6:if(0!==s){t.next=11;break}r=c.length-1,e.setState({audioIndex:r},Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.audios();case 1:case"end":return t.stop()}}),t)})))),t.next=15;break;case 11:if(!(s-1>=0)){t.next=15;break}return console.log(s),t.next=15,e.setState({audioIndex:s-1,isPlay:!0},Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.audios();case 1:case"end":return t.stop()}}),t)}))));case 15:case"end":return t.stop()}}),t)}))),e.next=Object(b.a)(j.a.mark((function t(){var n,a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.props.audio.data){t.next=5;break}f.b.warning("\u6b4c\u5355\u961f\u5217\u91cc\u8fd8\u6ca1\u6709\u6b4c\u66f2"),t.next=14;break;case 5:if(n=e.state,a=n.allSongId,!((s=n.audioIndex)+1<a.length)){t.next=11;break}return t.next=9,e.setState({audioIndex:s+1,isPlay:!0},Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.audios();case 1:case"end":return t.stop()}}),t)}))));case 9:t.next=14;break;case 11:if(!(s+2>a.length)){t.next=14;break}return t.next=14,e.setState({audioIndex:0,isPlay:!0},Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.audios();case 1:case"end":return t.stop()}}),t)}))));case 14:case"end":return t.stop()}}),t)}))),e.lrc=function(){!1===e.state.lrc?e.setState({lrc:!0}):e.setState({lrc:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){B.a.unsubscribe(xe),B.a.unsubscribe(Oe)}},{key:"millisecondToDate",value:function(e){var t=Math.floor(e%60),n=Math.floor(e/60);return"".concat(n,":").concat(t>=10?t:"0".concat(t))}},{key:"controlAudio",value:function(e,t){var n=document.getElementById("audio"),a=document.getElementById("time");if(a.value>0){var s=a.value/this.state.allTime*100;this.setState({progress:s})}switch(e){case"allTime":this.setState({allTime:n.duration});break;case"play":n.play(),this.setState({isPlay:!0});break;case"pause":n.pause(),this.setState({isPlay:!1});break;case"muted":!1===this.state.isMuted?this.setState({isMuted:!0,volume:0}):this.setState({isMuted:!1,volume:100*n.volume}),n.muted=!n.muted;break;case"changeCurrentTime":this.setState({currentTime:t}),n.currentTime=t;break;case"getCurrentTime":this.setState({currentTime:n.currentTime});break;case"changeVolume":n.volume=t/100,this.setState({volume:t,isMuted:!t});break;default:return null}}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.isPlay,s=n.currentTime,c=n.allTime,r=n.isMuted,i=n.volume,l=n.progress,u=n.lrc,o={backgroundSize:l+"% 100%"},d={backgroundSize:i+"% 100%"},j=this.props.audio;e=null===j.data?null:j.data[0].url;var b=this.props.audioDetails;return Object(Q.jsxs)("div",{className:"all-audio",children:[Object(Q.jsx)("input",{type:"range",id:"time",className:"time",step:"0.01",max:c,value:s,style:o,onChange:function(e){var n=e.target.value;t.controlAudio("changeCurrentTime",n)}}),Object(Q.jsxs)("div",{className:"audioBox",children:[Object(Q.jsx)("audio",{src:e,id:"audio",onCanPlay:function(){return t.controlAudio("allTime")},onTimeUpdate:function(e){return t.controlAudio("getCurrentTime")},onEnded:function(){t.controlNextAudio()},ref:this.audioPlayer,children:"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 audio \u6807\u7b7e\u3002"}),null===b.data?Object(Q.jsx)("div",{className:"song-details"}):Object(Q.jsxs)("div",{className:"song-details ",children:[Object(Q.jsx)("div",{className:"song-details-Img",children:Object(Q.jsx)(ce.a,{preview:!1,src:b.data[0].al.picUrl,onClick:this.lrc})}),Object(Q.jsxs)("div",{className:" song-details-data",children:[Object(Q.jsx)("div",{className:"details-name",children:b.data[0].name}),Object(Q.jsx)("div",{className:"delimiter",children:"-"}),Object(Q.jsx)("div",{className:"detailis-singer",children:b.data[0].al.name})]}),Object(Q.jsx)("span",{className:"current",children:this.millisecondToDate(s)+"/"+this.millisecondToDate(c)})]}),Object(Q.jsxs)("div",{className:"button-area",children:[Object(Q.jsx)(me.a,{style:{color:"#d33a31",fontSize:22,marginRight:10},onClick:this.previous}),Object(Q.jsx)("div",{className:"bottom",onClick:function(){return t.controlAudio(a?"pause":"play")},children:Object(Q.jsx)("div",{className:a?"pause":"play"})}),Object(Q.jsx)(he.a,{style:{color:"#d33a31",fontSize:22,marginLeft:10},onClick:this.next})]}),Object(Q.jsxs)("div",{className:"control-area",children:[Object(Q.jsx)("div",{children:Object(Q.jsx)(pe.a,{className:this.state.iconPlaylist?"icon-playlist-true":"icon-playlist-false",onClick:this.setIcon})}),Object(Q.jsx)("div",{children:Object(Q.jsx)(fe.a,{className:r?"mute":"nomute",onClick:function(){return t.controlAudio("muted")}})}),Object(Q.jsx)("input",{type:"range",style:d,className:"volume",onChange:function(e){var n=e.target.value,a=void 0===n?{}:n;t.controlAudio("changeVolume",a)},value:r?0:i})]})]}),Object(Q.jsx)(be,{}),Object(Q.jsx)(ke,{state:u,data:b.data,isPlay:a})]})}}]),n}(a.Component),we=Object($.b)((function(e){return{audio:e.audio,audioDetails:e.audioDetails}}),{setListFalse:function(e){return{type:"false",data:e}},setListTrue:function(e){return{type:"true",data:e}},setAudioUrl:ve,setAudioDetails:function(e){return{type:"setAudioDetails",data:e}}})(Se),Ie=n(171),Le=n(331),Ce=n(332),Te=n(333),Ae=n(176),De=(n(298),n(299),n(115)),Ee=n.n(De),Me=n(136),Pe=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={data:e.props.match.params.id,current:"mail",result:{},song:"",info:"",list:null,index:null,initArr:[],searc:!1},e.init=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPlayList();case 2:return t.next=4,B.a.subscribe("audioIndex",function(){var t=Object(b.a)(j.a.mark((function t(n,a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({list:a});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)}))),e.init2=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.UpdataPlayList(n);case 2:return t.next=4,B.a.subscribe("audioIndex",function(){var t=Object(b.a)(j.a.mark((function t(n,a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({list:a});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.UpdataPlayList=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,s,c,r,i,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({isLoding:!0});case 2:return t.next=4,S(n);case 4:for(a=t.sent,s=a&&a.data.playlist,c=s&&s.trackIds,r=[],i="",l=0;l<c.length;l++)r.push(c[l].id),i=r.toString();e.getSongname(i),e.setState({result:s,info:r});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getSongname=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,s,c,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({isLoding:!0});case 2:return t.next=4,w(n);case 4:a=t.sent,s=a.data.songs,c=[],r=(void 0===s?{}:s).map((function(e){var t=e.al,n=e.ar,a=e.id,s=e.name,r=e.dt;c.push(s,t.name,n[0].name);var i=Ee()(r).format("mm:ss");return{key:a,name:s,singer:n[0].name,album:t.name,songimg:t.picUrl,duration:i}})),e.setState({song:r,isLoding:!1,initArr:r});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getPlayList=Object(b.a)(j.a.mark((function t(){var n,a,s,c,r,i,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.data,e.setState({isLoding:!0}),t.next=4,S(n);case 4:for(a=t.sent,s=a&&a.data.playlist,c=s&&s.trackIds,r=[],i="",l=0;l<c.length;l++)r.push(c[l].id),i=r.toString();e.getSongname(i),e.setState({result:s,info:r});case 12:case"end":return t.stop()}}),t)}))),e.handleClick=function(t){e.setState({current:t.key})},e.getSongUrl=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,s,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I(n);case 2:a=t.sent,s=a.data.data,c=void 0===s?{}:s,console.log(c),null===c[0].url?f.b.error("\u6ca1\u6709\u7248\u6743"):((0,e.props.setAudioUrl)(c),document.getElementById("audio").play());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.rowRenderer=function(t){var n=t.key,a=t.index,s=t.style,c=e.state,r=c.song,i=c.list;return Object(Q.jsx)("div",{style:s,children:Object(Q.jsxs)("div",{onDoubleClick:function(){e.doubleClick(r[a])},className:a%2===0?"playlist-song":"playlist-song table2",children:[Object(Q.jsx)("div",{className:"playlist-index",children:a+1}),Object(Q.jsx)("div",{className:r[a].key===i?"playlist-song-name active-list":"playlist-song-name",children:r[a].name}),Object(Q.jsx)("div",{className:"playlist-song-singer",children:r[a].singer}),Object(Q.jsx)("div",{className:"playlist-song-album",children:r[a].album}),Object(Q.jsx)("div",{className:"playlist-song-time",children:r[a].duration})]})},n)},e.doubleClick=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,s,c,r,i,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,s=a.song,c=a.info,t.next=3,I(n.key);case 3:r=t.sent,i=r.data.data,null===(l=void 0===i?{}:i)[0].url?f.b.error("\u6ca1\u6709\u7248\u6743"):((0,e.props.setAudioUrl)(l),document.getElementById("audio").play(),B.a.publish("songID",n),B.a.publish("songAllId",c),(0,e.props.getList)(s));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.search=function(){var t=Object(b.a)(j.a.mark((function t(n){var a,s,c,r,i,l,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({search:!0});case 2:a=n.target.value,s=e.state.initArr,c=s.filter((function(e){return e.name.includes(a)})),r=s.filter((function(e){return e.singer.includes(a)})),i=s.filter((function(e){return e.album.includes(a)})),l=c.concat(r,i),u=Object(Ie.a)(new Set(l)),e.setState({song:u});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e){var t=e.match.params.id,n=void 0===t?{}:t;if(this.props.match.params.id!==n){var a=this.props.match.params.id;this.init2(a)}}},{key:"componentWillUnmount",value:function(){this.setState=function(){return!1}}},{key:"render",value:function(){var e=this,t=this.state.result,n=t.name,a=t.trackCount,s=t.playCount,c=t.coverImgUrl,r=t.creator,i=void 0===r?{}:r,l=t.createTime,u=new Date(l),o=u.getFullYear()+"-",d=(u.getMonth()+1<10?"0"+(u.getMonth()+1):u.getMonth()+1)+"-",j=u.getDate()+" ",b=i.avatarUrl,m=void 0===b?"defaultAvatarURL":b,h=Object(Q.jsx)(ue.a,{style:{fontSize:200},spin:!0}),p=this.state,f=p.isLoding,x=p.current,O=p.song,v=void 0===O?{}:O;return Object(Q.jsx)("div",{className:"playlist",children:f?Object(Q.jsx)("div",{className:"playlist-loding",children:Object(Q.jsx)("div",{children:Object(Q.jsx)(re.a,{indicator:h})})}):Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("div",{className:"playlist-header",children:[Object(Q.jsx)("div",{className:"playlist-header-img",children:Object(Q.jsx)(ce.a,{src:c})}),Object(Q.jsx)("div",{className:"playlist-header-username",children:n}),Object(Q.jsxs)("div",{className:"playlist-header-userimg",children:[m&&Object(Q.jsx)(ce.a,{src:i.avatarUrl}),Object(Q.jsx)(ce.a,{src:i&&i.avatarUrl})]}),Object(Q.jsxs)("div",{className:"playlist-header-userid",children:[Object(Q.jsx)("div",{children:i&&i.nickname}),Object(Q.jsxs)("div",{className:"playlist-header-creattime",children:[o+d+j,"\u521b\u5efa"]})]}),Object(Q.jsxs)("div",{className:"playlist-header-button",children:[Object(Q.jsx)(z.a,{type:"primary",shape:"round",icon:Object(Q.jsx)(Le.a,{}),size:"middle",style:{backgroundColor:"#df4036",fontSize:"13px",marginRight:"4px"},children:"\u64ad\u653e\u5168\u90e8"}),Object(Q.jsx)(z.a,{shape:"round",icon:Object(Q.jsx)(Ce.a,{}),style:{backgroundColor:"#202020",borderColor:"#949494",color:"#949494",margin:"0 4px"},children:"\u5df2\u6536\u85cf(0)"}),Object(Q.jsx)(z.a,{shape:"round",icon:Object(Q.jsx)(Te.a,{}),style:{backgroundColor:"#202020",borderColor:"#949494",color:"#949494",margin:"0 4px"},children:"\u5206\u4eab(0)"}),Object(Q.jsx)(z.a,{shape:"round",icon:Object(Q.jsx)(Ce.a,{}),style:{backgroundColor:"#202020",borderColor:"#949494",color:"#949494",margin:"0 4px"},children:"\u4e0b\u8f7d\u5230\u672c\u5730"})]}),Object(Q.jsxs)("div",{className:"playlist-header-data",children:["\u6b4c\u66f2\u6570:",Object(Q.jsx)("span",{children:a})," \xa0\xa0\u64ad\u653e\u6570:",Object(Q.jsx)("span",{children:s})]})]}),Object(Q.jsxs)("div",{className:"playlist-content",children:[Object(Q.jsxs)("div",{className:"playlist-content-title",children:[Object(Q.jsxs)(M.a,{onClick:this.handleClick,selectedKeys:[x],mode:"horizontal",style:{backgroundColor:"#252525",borderColor:"#303030",color:"#b3b3b3"},children:[Object(Q.jsx)(M.a.Item,{children:"\u6b4c\u66f2"},"mail"),Object(Q.jsx)(M.a.Item,{children:"\u8bc4\u8bba"},"app")]}),Object(Q.jsxs)("div",{className:"playlist-search-box",children:[Object(Q.jsx)(Ae.a,{style:{color:"#b3b3b3"}}),Object(Q.jsx)("input",{type:"text",className:"playlist-search",placeholder:"\u641c\u7d22\u6b4c\u5355\u97f3\u4e50",onChange:this.search})]})]}),Object(Q.jsx)("div",{className:"playlist-table1",children:Object(Q.jsxs)("div",{className:"playlist-song1",children:[Object(Q.jsx)("div",{className:"playlist-index"}),Object(Q.jsx)("div",{className:"playlist-song-name",children:"\u97f3\u4e50\u6807\u9898"}),Object(Q.jsx)("div",{className:"playlist-song-singer",children:"\u6b4c\u624b"}),Object(Q.jsx)("div",{className:"playlist-song-album",children:"\u4e13\u8f91"}),Object(Q.jsx)("div",{className:"playlist-song-time",children:"\u65f6\u957f"})]})})]}),Object(Q.jsx)("div",{className:"playlist-table",children:Object(Q.jsx)(Me.a,{children:function(t){var n=t.height,a=t.width;return Object(Q.jsx)(Me.b,{height:n,className:"playlist-table",rowCount:v.length,rowHeight:35,rowRenderer:e.rowRenderer,width:a})}})})]})})}}]),n}(a.Component),Ue=Object($.b)(null,{getList:function(e){return{type:"click",data:e}},setAudioUrl:ve})(Pe),Re=(n(308),Object($.b)()((function(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),s=(n[0],n[1]),c=Object(a.useState)(),r=Object(m.a)(c,2),i=r[0],l=r[1],u=Object(a.useState)(null),o=Object(m.a)(u,2),d=o[0],h=o[1],p=e.match.params.value,f=function(e){var t=new RegExp(p,"ig"),n=e.match(t);return e.replace(t,"<span class='search-highLight'>".concat(n,"</span>"))};return Object(a.useEffect)((function(){return function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,x(O+"/cloudsearch",{keywords:p},"GET");case 3:t=e.sent,n=t.data.result,console.log(n.songs),l(n.songCount),h(n.songs),s(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){}}),[p]),Object(Q.jsx)("div",{children:Object(Q.jsxs)("div",{className:"search-return-box",children:[Object(Q.jsxs)("div",{className:"search-return-data",children:[p,Object(Q.jsxs)("span",{className:"search-return-value",children:["\u627e\u5230",i,"\u9996"]})]}),Object(Q.jsxs)("div",{className:"search-return-table",children:[Object(Q.jsx)("div",{className:"search-return-null"}),Object(Q.jsx)("div",{className:"search-return-title",children:"\u97f3\u4e50\u6807\u9898"}),Object(Q.jsx)("div",{className:"search-return-artist",children:"\u6b4c\u624b"}),Object(Q.jsx)("div",{className:"search-return-albums",children:"\u4e13\u8f91"}),Object(Q.jsx)("div",{className:"search-return-time",children:"\u65f6\u957f"})]}),Object(Q.jsx)("div",{className:"search-return",children:d?d.map((function(e,t){return Object(Q.jsxs)("div",{className:t%2===0?"search-return-deatils":"search-return-deatils search-active",children:[Object(Q.jsx)("div",{className:"search-deatils-index",children:t+1<10?"0"+(t+1):t+1}),Object(Q.jsx)("div",{className:"search-deatils-name",dangerouslySetInnerHTML:{__html:f(e.name)}}),Object(Q.jsx)("div",{className:"search-deatils-artist",dangerouslySetInnerHTML:{__html:f(e.ar[0].name)}}),Object(Q.jsx)("div",{className:"search-deatils-albums",dangerouslySetInnerHTML:{__html:f(e.al.name)}}),Object(Q.jsx)("div",{className:"search-deatils-time",children:Ee()(e.dt).format("mm:ss")})]},t)})):null})]})})}))),ze=n(30),Ge=(n(309),Object($.b)()((function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(null),r=Object(m.a)(c,2),i=r[0],l=r[1],u=Object(Q.jsx)(ue.a,{style:{fontSize:50},spin:!0});return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,x(O+"/search/hot/detail",{},"GET");case 3:t=e.sent,n=t.data.data,l(void 0===n?{}:n),s(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(Q.jsx)("div",{children:Object(Q.jsxs)("div",{className:"search-input",children:[Object(Q.jsxs)("div",{className:"search-history",children:[Object(Q.jsx)("div",{className:"search-history-title",children:"\u641c\u7d22\u5386\u53f2"}),Object(Q.jsx)("div",{className:"search-history-data"})]}),Object(Q.jsxs)("div",{className:"search-hot",children:[Object(Q.jsx)("div",{className:"search-hot-title",children:"\u70ed\u641c\u699c"}),n?Object(Q.jsx)("div",{children:Object(Q.jsx)(re.a,{indicator:u})}):Object(Q.jsx)("div",{children:null!==i?i.map((function(e,t){return Object(Q.jsxs)("div",{className:"search-hot-data",children:[Object(Q.jsx)("div",{className:t+1<=3?"search-hot-index hot":"search-hot-index ",children:t+1}),Object(Q.jsxs)("div",{className:"search-hot-name",children:[Object(Q.jsx)("div",{className:"search-hot-songname",children:e.searchWord}),e.iconUrl?Object(Q.jsx)("img",{className:"search-hot-img",src:e.iconUrl,alt:""}):null,Object(Q.jsx)("span",{className:"search-ishot",children:e.score}),Object(Q.jsx)("div",{className:"search-hot-details",children:e.content})]})]},t)})):null})]})]})})}))),_e=(n(310),Object($.b)()((function(e){var t=Object(a.useState)(null),n=Object(m.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(null),i=Object(m.a)(r,2),l=i[0],u=i[1],o=Object(a.useState)(null),d=Object(m.a)(o,2),j=d[0],b=d[1],h=Object(a.useState)(null),p=Object(m.a)(h,2),f=p[0],x=p[1],O=e.suggestData;Object(a.useEffect)((function(){return void 0!==O&&(O.order.includes("songs")?void 0!==O.songs&&c(O.songs):O.order.includes("songs")||c(null),O.order.includes("artists")?void 0!==O.artist&&u(O.artists):O.order.includes("artists")||u(null),O.order.includes("albums")?void 0!==O.albums&&b(O.albums):O.order.includes("albums")||b(null),O.order.includes("playlists")?void 0!==O.playlists&&x(O.playlists):O.order.includes("playlists")||x(null)),function(){}}),[O]);var v=function(t){var n=new RegExp(e.suggestValue,"ig"),a=t.match(n);return t.replace(n,"<span class='highLight'>".concat(a,"</span>"))};return Object(Q.jsx)("div",{children:Object(Q.jsxs)("div",{className:"suggest-input",children:[Object(Q.jsxs)("div",{className:"suggest-input-title",children:["\u641c\u7d22\u201c",Object(Q.jsx)("span",{className:"suggset-input-data",children:e.suggestValue}),"\u201d\u76f8\u5173\u7684\u7ed3\u679c"]}),null===s?null:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"suggest-data",children:"\u5355\u66f2"}),s.map((function(e,t){return Object(Q.jsx)("div",{className:"suggest-data-songname",dangerouslySetInnerHTML:{__html:v(e.name)+"&nbsp;-&nbsp;"+v(e.artists[0].name)}},t)}))]}),null===l?null:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"suggest-data",children:"\u6b4c\u624b"}),l.map((function(e,t){return Object(Q.jsx)("div",{className:"suggest-data-songname",dangerouslySetInnerHTML:{__html:v(e.name)}},t)}))]}),null===j?null:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"suggest-data",children:"\u4e13\u8f91"}),j.map((function(e,t){return Object(Q.jsx)("div",{className:"suggest-data-songname",dangerouslySetInnerHTML:{__html:v(e.name)+"&nbsp;-&nbsp;"+v(e.artist.name)}},t)}))]}),null===f?null:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"suggest-data",children:"\u6b4c\u5355"}),f.map((function(e,t){return Object(Q.jsx)("div",{className:"suggest-data-songname",dangerouslySetInnerHTML:{__html:v(e.name)}},t)}))]})]})})}))),He=Object($.b)((function(e){return{searchState:e.searchState.data}}),{searchInput:function(e){return{type:"setInput",data:e}}})((function(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(!1),i=Object(m.a)(r,2),l=i[0],u=i[1],o=Object(a.useState)(),d=Object(m.a)(o,2),h=d[0],p=d[1],f=Object(a.useState)(),v=Object(m.a)(f,2),g=v[0],y=v[1],N=Object(a.useRef)(),k=Object(a.useRef)();Object(a.useEffect)((function(){return document.addEventListener("mousedown",(function(e){return S(e)}),!1),function(){document.removeEventListener("mousedown",(function(e){return S(e)}),!1)}}),[]);var S=function(e){null!==N.current&&!1===N.current.contains(e.target)&&(c(!1),u(!1))},w=function(e,t){var n=Object(a.useRef)({fn:e,timer:null}).current;return Object(a.useEffect)((function(){n.fn=e}),[e]),Object(a.useCallback)((function(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];n.timer&&clearTimeout(n.timer),n.timer=setTimeout((function(){n.fn.apply(n,a)}),t)}),[])}(function(){var e=Object(b.a)(j.a.mark((function e(t){var n,a,s,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,""===(a=void 0===n?{}:n)){e.next=9;break}return e.next=4,x(O+"/search/suggest",{keywords:a},"GET");case 4:s=e.sent,(r=s.data.result).hasOwnProperty("order")&&(u(!0),c(!1),y(r),p(a)),e.next=10;break;case 9:""===a&&(c(!0),u(!1));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),300);return Object(Q.jsx)("div",{className:"app",children:Object(Q.jsxs)("div",{className:"all-app",children:[Object(Q.jsxs)("div",{className:"top",children:[Object(Q.jsxs)("div",{className:"top-nav",children:[Object(Q.jsx)(P.b,{to:"/App/home",className:"nav",children:"\u4e2a\u6027\u63a8\u8350"}),Object(Q.jsx)(P.b,{to:"/App/home",className:"nav",children:"\u6b4c\u5355"}),Object(Q.jsx)(P.b,{to:"/App/home",className:"nav",children:"\u6700\u65b0\u97f3\u4e50"})]}),Object(Q.jsxs)("div",{className:"top-right",ref:N,children:[Object(Q.jsx)("input",{ref:k,onInput:w,onKeyUp:function(t){13===t.keyCode&&(e.history.replace("/App/search/".concat(t.target.value)),u(!1))},onFocus:function(e){s&&(e.target.value=""),l||(e.target.value=""),c(!0)},onBlur:function(){},type:"text",placeholder:"\ue623\xa0\u641c\u7d22",className:"top-input iconfont"}),s?Object(Q.jsx)(Ge,{}):null,l?Object(Q.jsx)(_e,{suggestValue:h,suggestData:g}):null]})]}),Object(Q.jsx)(ne,{}),Object(Q.jsx)(ze.b,{path:"/App/home",component:de}),Object(Q.jsx)(ze.b,{path:"/App/playlist/:id",component:Ue}),Object(Q.jsx)(ze.b,{path:"/App/search/:value",component:Re}),Object(Q.jsx)(ze.a,{to:"/App/home"}),Object(Q.jsx)(we,{})]})})})),Be=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(Q.jsx)(P.a,{children:Object(Q.jsxs)(ze.d,{children:[Object(Q.jsx)(ze.b,{path:"/App",component:He}),Object(Q.jsx)(ze.a,{to:"/App"})]})})}}]),n}(a.Component),Ye=(n(311),n(91)),Fe={data:!1};var Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"true":case"false":return Object.assign({},e,{data:a});default:return e}},We={data:null};var Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"click":return Object.assign({},e,{data:a});default:return e}},qe={data:null},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"setAudioUrl":return Object.assign({},e,{data:a});default:return e}},Qe={data:null},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"setAudioDetails":return Object.assign({},e,{data:a});default:return e}},Ze={data:!1},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"setLoginState":return Object.assign({},e,{data:a});default:return e}},et={data:null},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"setInput":return Object.assign({},e,{data:a});default:return e}},nt=Object(Ye.b)({sideList:Ve,playList:Ke,audio:Je,audioDetails:Xe,loginState:$e,searchState:tt}),at=Object(Ye.c)(nt),st=q();Y.user=st,r.a.render(Object(Q.jsx)($.a,{store:at,children:Object(Q.jsx)(Be,{})}),document.getElementById("root"))}},[[312,1,2]]]);
//# sourceMappingURL=main.3b468c0e.chunk.js.map